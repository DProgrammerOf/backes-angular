<nav class="header-client-app">
    <span class="back-nav" (click)="this.location.back()">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
    </span>
</nav>

<main class="content-client-app" (click)="this.base.setMenu(false)">
    <div #map id="map" [class.map-veiculo]="this.veiculoId > -1" [class.map-veiculos]="this.veiculoId == -1" 
        [class.map-veiculo-android]="this.veiculoId > -1 && this.app.platform?.toLocaleLowerCase() == 'android'"
        [class.map-veiculos-android]="this.veiculoId == -1 && this.app.platform?.toLocaleLowerCase() == 'android'"
        (click)="this.closeInfo()" ></div>
</main>

<div id="btn-acoes" [hidden]="this.veiculos === undefined || this.veiculoId == -1" [ngStyle]="{'top': offset_top}">
    <button class="btn-in-map" ion-button icon-only color="royal" (click)="this.openComandos()">
        <i class="fa fa-cog" aria-hidden="true"></i>
    </button>
    <button class="btn-in-map" ion-button icon-only color="royal" (click)="this.openExternMaps()">
        <i class="fa fa-male" aria-hidden="true"></i>
    </button>
    <span style="position: relative;">
        <span *ngIf="this.veiculoAlertas > 0" style="
            position: absolute;
            z-index: 2;
            font-style: normal;
            background: #198754;
            color: white;
            width: auto;
            top: -0.6rem;
            text-align: center;
            border-radius: 1rem;
            font-size: .6rem;
            line-height: .8rem;
            font-weight: bold;
            padding: 0.2rem .4rem;
            left: 50%;
            transform: translateX(-50%);" class="btn-backes-success">{{ this.veiculoAlertas }}</span>
        <button class="btn-in-map" ion-button icon-only color="royal" (click)="this.openAlertas()">
            <i class="fa fa-bell" aria-hidden="true"></i>
        </button>
    </span>
</div>

<div id="btn-vel">
    <button class="btn-in-map btn-vel" ion-button style="text-transform: inherit;">
        <i class="icon ion-md-speedometer" aria-hidden="true"></i> 
        <span>{{this.veiculos?.[0]?.speed}}</span>
        <span>Km/h</span>
    </button>
</div>

<div id="info-bem" [@animationMapPopup]="this.veiculoFocusStatus ? 'opened' : 'closed'" [class.info-bem-android]="this.app.platform?.toLocaleLowerCase() == 'android'">
    <div class="info-desc">
        <span class="velocidade" [class.ign-on]="veiculoFocus?.ligado === 'S'">
            <span [class.isOne]="veiculoFocus?.speed == 1">{{veiculoFocus?.speed}}</span>
        </span>
        <div class="identificacao">
            <span class="placa">{{veiculoFocus?.name}}</span>
            <span class="modelo">{{veiculoFocus?.marca}} {{veiculoFocus?.cor}}</span>
        </div>
        
        <i class="close-info-bem fa fa-times-circle" (click)="this.closeInfo()"></i>
    </div>

    <div class="status">
        <span class="address">{{veiculoFocus?.endereco}}</span>
        <span class="last-att" [hidden]="veiculoFocus?.ligado != 'N'">Desligado a {{veiculoFocus?.parado || 0}}.</span>
        <span class="last-att">Atualizado em {{veiculoFocus?.obj_localizacao?.date | todate:'DD/MM/yyyy HH:mm:ss' }}</span>
    </div>

    <hr />

    <div class="infos">

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M12 4C6.486 4 2 8.486 2 14a9.89 9.89 0 0 0 1.051 4.445c.17.34.516.555.895.555h16.107c.379 0 .726-.215.896-.555A9.89 9.89 0 0 0 22 14c0-5.514-4.486-10-10-10zm7.41 13H4.59A7.875 7.875 0 0 1 4 14c0-4.411 3.589-8 8-8s8 3.589 8 8a7.875 7.875 0 0 1-.59 3z"></path><path d="M10.939 12.939a1.53 1.53 0 0 0 0 2.561 1.53 1.53 0 0 0 2.121-.44l3.962-6.038a.034.034 0 0 0 0-.035.033.033 0 0 0-.045-.01l-6.038 3.962z"></path></svg>
            <span class="desc">Odômetro</span>
            <span class="desc-valor">{{ veiculoFocus?.hodometro || 0 | mask: 'separator.0' | tokm }} km</span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"><g id="surface1"><path style="fill:none;stroke-width:32;stroke-linecap:square;stroke-linejoin:miter;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 77.666667 144 L 386.333333 144 C 411.5 144 432 164.5 432 189.666667 L 432 322.333333 C 432 347.5 411.5 368 386.333333 368 L 77.666667 368 C 52.5 368 32 347.5 32 322.333333 L 32 189.666667 C 32 164.5 52.5 144 77.666667 144 Z M 77.666667 144 " transform="matrix(0.046875,0,0,0.046875,0,0)"/><path style="fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;stroke-width:32;stroke-linecap:square;stroke-linejoin:miter;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 89.666667 198.916667 L 374.333333 198.916667 C 376.5 198.916667 378.333333 200.75 378.333333 202.916667 L 378.333333 309.083333 C 378.333333 311.25 376.5 313.083333 374.333333 313.083333 L 89.666667 313.083333 C 87.5 313.083333 85.666667 311.25 85.666667 309.083333 L 85.666667 202.916667 C 85.666667 200.75 87.5 198.916667 89.666667 198.916667 Z M 89.666667 198.916667 " transform="matrix(0.046875,0,0,0.046875,0,0)"/><path style="fill:none;stroke-width:32;stroke-linecap:round;stroke-linejoin:miter;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 480 218.666667 L 480 293.333333 " transform="matrix(0.046875,0,0,0.046875,0,0)"/></g></svg>
            <span class="desc">Nível Bateria</span>
            <span class="desc-valor">{{veiculoFocus?.nivel_bateria == null ? 'Indisponível' : veiculoFocus?.nivel_bateria+'%'}}</span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M20 10V8a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2h2v-4h-2zM9 17l2-3.89L7 12l6-5-1 3.89L16 12l-7 5z"></path></svg>
            <span class="desc">Volt. Bateria</span>
            <span class="desc-valor">{{veiculoFocus?.voltagem_bateria == null ? 'Indisponível' : veiculoFocus?.voltagem_bateria+'v'}}</span>
        </div>
        

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm7.931 9h-2.764a14.67 14.67 0 0 0-1.792-6.243A8.013 8.013 0 0 1 19.931 11zM12.53 4.027c1.035 1.364 2.427 3.78 2.627 6.973H9.03c.139-2.596.994-5.028 2.451-6.974.172-.01.344-.026.519-.026.179 0 .354.016.53.027zm-3.842.7C7.704 6.618 7.136 8.762 7.03 11H4.069a8.013 8.013 0 0 1 4.619-6.273zM4.069 13h2.974c.136 2.379.665 4.478 1.556 6.23A8.01 8.01 0 0 1 4.069 13zm7.381 6.973C10.049 18.275 9.222 15.896 9.041 13h6.113c-.208 2.773-1.117 5.196-2.603 6.972-.182.012-.364.028-.551.028-.186 0-.367-.016-.55-.027zm4.011-.772c.955-1.794 1.538-3.901 1.691-6.201h2.778a8.005 8.005 0 0 1-4.469 6.201z"></path></svg>
            <span class="desc">Satélites</span>
            <span class="desc-valor">{{veiculoFocus?.satelites == null ? 'Indisponível' : veiculoFocus?.satelites}}</span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>
            <span class="desc">Sinal</span>
            <span class="desc-valor">{{veiculoFocus?.sinal == null ? 'Indisponível' : veiculoFocus?.sinal+'%'}}</span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M19.924 10.383a1 1 0 0 0-.217-1.09l-5-5-1.414 1.414L16.586 9H4v2h15a1 1 0 0 0 .924-.617zM4.076 13.617a1 1 0 0 0 .217 1.09l5 5 1.414-1.414L7.414 15H20v-2H5a.999.999 0 0 0-.924.617z"></path></svg>
            <span class="desc">Saída 1/2</span>
            <span class="desc-valor">
                {{veiculoFocus?.saida1 == null ? 'Indisponível' : veiculoFocus?.saida1}}
                <br />
                {{veiculoFocus?.saida2 == null ? 'Indisponível' : veiculoFocus?.saida2}}
            </span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M13 7h-2v5.414l3.293 3.293 1.414-1.414L13 11.586z"></path></svg>
            <span class="desc">Horímetro</span>
            <span class="desc-valor">{{veiculoFocus?.horimetro == null ? 'Indisponível' : veiculoFocus?.horimetroFormatted }}</span>
        </div>

        <div class="attr">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);"><path d="M12 2A10.13 10.13 0 0 0 2 12a10 10 0 0 0 4 7.92V20h.1a9.7 9.7 0 0 0 11.8 0h.1v-.08A10 10 0 0 0 22 12 10.13 10.13 0 0 0 12 2zM8.07 18.93A3 3 0 0 1 11 16.57h2a3 3 0 0 1 2.93 2.36 7.75 7.75 0 0 1-7.86 0zm9.54-1.29A5 5 0 0 0 13 14.57h-2a5 5 0 0 0-4.61 3.07A8 8 0 0 1 4 12a8.1 8.1 0 0 1 8-8 8.1 8.1 0 0 1 8 8 8 8 0 0 1-2.39 5.64z"></path><path d="M12 6a3.91 3.91 0 0 0-4 4 3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4zm0 6a1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2 1.91 1.91 0 0 1-2 2z"></path></svg>
            <span class="desc">Motorista</span>
            <span class="desc-valor">{{veiculoFocus?.motorista}}</span>
        </div>
    </div>
</div>


<div style="display: none;">
    <img src="assets/modals/combustivel.png">
    <img src="assets/modals/horimetro.png">
    <img src="assets/modals/motorista.png">
</div>