<nav class="header-client-app">
    <span class="menu-bar" (click)="this.base.setMenu(true)">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </span>
    <h6>{{ this.titlePage }}</h6>
    <div class="lista-actions">
        <i class="icon ion-md-car" aria-hidden="true" (click)="this.mapaVeiculos()"></i>
        <i class="icon ion-md-refresh" aria-hidden="true" (click)="this.refresh()"></i>
    </div>
</nav>

<div id="router-veiculos" [@routeVeiculosAnimations]="this.getRouteAnimationData()">
    <router-outlet></router-outlet>
</div>

<main [class.content-client-app]="true" [class.content-client-app-android]="this.app.platform?.toLocaleLowerCase() == 'android'" (click)="this.base.setMenu(false)">
    <div class="veiculo-search">
        <div class="input-group">
            <span class="input-group-text" id="label-search-bem">
                <i class="icon ion-md-search" aria-hidden="true"></i>
            </span>
            <input type="text" class="form-control" 
            placeholder="Placa, Motorista ou Veículo" 
            aria-label="Procure por placa, Motorista ou Veículo" 
            aria-describedby="label-search-bem"
            [(ngModel)]="this.searchValue"
            (input)="this.filterSelectBem()" />
            <span class="input-group-text" id="close-search-bem">
                <i class="icon ion-md-close" aria-hidden="true"
                *ngIf="this.searchValue" (click)="this.filterCancelSelectBem()"></i>
            </span>
        </div> 
    </div>
    <div class="veiculo-card" [id]="item.id" [class.offcard]="item.status_sinal == 'D'" *ngFor="let item of this.veiculosFiltered">
        <div class="card-infos" (click)="mapaVeiculo(item)">
            <div class="infos-top">
                <div class="identificacao">
                    <span style="font-size: 1.5rem; line-height: 1.5rem;">{{item.name}}</span>
                    <span style="font-size: 0.73em; text-transform: uppercase;">{{ (item.motorista) ? '('+item.motorista+')' : '('+item.marca+')' }}</span>
                </div>

                <div class="status">
                    <div [class.bg-success]="item.ligado == 'S'"   [class.bg-danger]="item.ligado == 'N'" id="notification-button">
                        <i class="icon ion-md-key notifications-badge" 
                        [class.text-danger]="item.ligado == 'N'" [class.text-success]="item.ligado == 'S'"
                        [class.fill-danger]="item.ligado == 'N'" [class.fill-success]="item.ligado == 'S'"></i>
                        <div style="background: transparent">
                            {{  item.obj_localizacao?.date | todate:'DD/MM/yyyy HH:mm:ss'  }}
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="infos-bottom">
                <div class="local">
                    <i class="icon ion-md-pin" 
                        [class.text-danger]="item.ligado == 'N'" [class.text-success]="item.ligado == 'S'"
                        [class.fill-danger]="item.ligado == 'N'" [class.fill-success]="item.ligado == 'S'"></i>
                    <span class="endereco">{{item.endereco}}</span>
                </div>

                <div class="velocidade">
                    <div>
                        <i class="icon ion-md-speedometer" 
                            [class.text-danger]="item.ligado == 'N'" [class.text-success]="item.ligado == 'S'"
                            [class.fill-danger]="item.ligado == 'N'" [class.fill-success]="item.ligado == 'S'"></i>
                        <span>{{item.speed}}</span>
                        <span class="unidade">Km/h</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-actions">
            <div style="text-align: center; border-top: 1px solid #EDEDED; background: white;">
                <div (click)="bloquear(item)" [hidden]="item.bloqueado=='S'">
                    <i color="iconscolor" class="fa fa-lock size-1_5"></i>
                    <span style="display: block; color:#444140">Bloquear</span>
                </div>
                <div (click)="desbloquear(item)" [hidden]="item.bloqueado=='N'">
                    <i color="iconscolor" class="fa fa-unlock-alt size-1_5"></i>
                    <span style="display: block; color:#444140">Desbloquear</span>
                </div>
                <div (click)="cercas(item)">
                    <i color="iconscolor" class="fa fa-map size-1_5"></i>
                    <span style="display: block; color:#444140">Cerca Virtual</span>
                </div>
                <div (click)="limiteVelocidade(item)">
                    <i color="iconscolor" class="fa fa-exclamation-triangle size-1_5"></i>
                    <span style="display: block;color:#444140">Velocidade Limite</span>
                </div>
            </div>
        </div>
	</div>
</main>


<div style="display: none;">
    <img src="assets/modals/bloquear.png">
    <img src="assets/modals/desbloquear.png">
    <img src="assets/modals/velocidadelimite.png">
</div>